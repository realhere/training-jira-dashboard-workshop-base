
# User Story: US-003 風險預警功能

## 📋 User Story

**作為** 產品負責人  
**我希望** 系統能在 Sprint 進度落後時主動發出預警通知  
**以便** 我能及時與利害關係人溝通並調整期望

---

## ✅ Acceptance Criteria

### AC-003-01: 進度落後預警觸發

**場景**：Sprint 進度落後時系統主動發出預警通知

**Given** 產品負責人已登入系統  
**And** Sprint 正在進行中  
**And** 當前完成率低於理想進度 10% 以上  
**When** 系統檢測到進度落後狀況  
**Then** 系統應立即顯示預警通知  
**And** 通知內容應包含落後程度和建議行動  
**And** 通知應以醒目的視覺效果呈現（如紅色警示圖示）

---

### AC-003-02: 預警通知內容完整性

**場景**：預警通知包含完整的風險資訊

**Given** 系統已觸發進度落後預警  
**When** 產品負責人查看預警通知  
**Then** 通知應顯示當前完成率百分比  
**And** 通知應顯示理想進度百分比  
**And** 通知應顯示落後程度（如：落後 15%）  
**And** 通知應提供具體的建議行動（如：重新評估 Sprint 範圍）  
**And** 通知應包含利害關係人溝通建議

---

### AC-003-03: 預警通知發送機制

**場景**：預警通知透過多種管道發送

**Given** 系統已檢測到進度落後  
**When** 預警通知被觸發  
**Then** 系統應在儀表板上顯示即時通知  
**And** 系統應發送電子郵件通知給產品負責人  
**And** 系統應在通知中心記錄預警歷史  
**And** 通知應包含時間戳記和 Sprint 資訊

---

### AC-003-04: 預警閾值設定

**場景**：系統支援自訂預警觸發條件

**Given** 產品負責人位於系統設定頁面  
**When** 產品負責人設定預警閾值為 15%  
**And** 儲存設定  
**Then** 系統應更新預警觸發條件  
**And** 當進度落後達到 15% 時才觸發預警  
**And** 設定應立即生效

---

### AC-003-05: 預警通知關閉與確認

**場景**：產品負責人可關閉或確認預警通知

**Given** 系統已顯示預警通知  
**When** 產品負責人點擊「確認」按鈕  
**Then** 通知應標記為已確認  
**And** 通知應從主要顯示區域移除  
**And** 通知應保留在歷史記錄中  
**When** 產品負責人點擊「關閉」按鈕  
**Then** 通知應立即隱藏  
**And** 但進度落後狀況仍持續監控

---

### AC-003-07: 預警通知重新觸發機制

**場景**：已確認的預警通知在進度落後狀況持續時重新顯示

**Given** 產品負責人已確認某個 Sprint 的預警通知  
**And** 該 Sprint 的進度落後狀況仍然存在  
**When** 系統重新檢查進度或頁面重新載入  
**Then** 系統應重新生成該 Sprint 的預警通知  
**And** 通知應顯示為新的未確認狀態  
**And** 系統應記錄重新觸發的歷史  
**When** Sprint 進度恢復正常  
**Then** 系統應自動清除該 Sprint 的所有未確認預警  
**And** 不再重新生成預警通知

---

### AC-003-06: 預警通知權限控制

**場景**：只有授權使用者能接收預警通知

**Given** 系統已檢測到進度落後  
**And** 當前使用者為一般開發者  
**When** 預警通知被觸發  
**Then** 系統不應向一般開發者發送預警通知  
**And** 只有產品負責人和 Scrum Master 應收到通知  
**And** 系統應記錄通知發送對象

---

## 🎯 技術需求

- **即時監控**：系統需即時監控 Sprint 進度變化
- **通知系統**：支援多種通知管道（儀表板、郵件、歷史記錄）
- **權限管理**：根據使用者角色控制通知發送
- **設定功能**：允許自訂預警觸發閾值
- **歷史追蹤**：記錄所有預警通知的歷史

---

## 📊 驗收標準摘要

| 驗收標準 | 描述 | 優先級 |
|----------|------|--------|
| AC-003-01 | 進度落後預警觸發 | 高 |
| AC-003-02 | 預警通知內容完整性 | 高 |
| AC-003-03 | 預警通知發送機制 | 中 |
| AC-003-04 | 預警閾值設定 | 中 |
| AC-003-05 | 預警通知關閉與確認 | 低 |
| AC-003-06 | 預警通知權限控制 | 中 |
| AC-003-07 | 預警通知重新觸發機制 | 高 |

---

## 📝 備註

- 預警通知應避免過於頻繁，建議設定冷卻時間
- 通知內容應使用商業語言，避免技術術語
- 建議提供預警通知的範本供產品負責人參考
- **重新觸發機制**：已確認的預警通知會在進度落後狀況持續時自動重新生成，確保產品負責人不會遺漏重要的風險警示
- **狀態監控**：系統會持續監控 Sprint 進度，當進度恢復正常時自動清除相關預警